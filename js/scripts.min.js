/*!
    Title: Dev Portfolio Template
    Version: 1.2.1
    Last Change: 08/27/2017
    Author: Ryan Fitzgerald
    Repo: https://github.com/RyanFitzgerald/devportfolio-template
    Issues: https://github.com/RyanFitzgerald/devportfolio-template/issues

    Description: This file contains all the scripts associated with the single-page
    portfolio website.
*/
function coffeeSteam(){var e=$("svg #steam-left"),t=$("#steam-right"),i=$("#steam-mid"),n=($("svg"),new TimelineMax({paused:!1,repeat:-1})),o=new TimelineMax({paused:!1,repeat:-1,yoyo:!0}),a=new TimelineMax({paused:!1,repeat:-1});n.to([e,t,i],2,{rotationY:"+=360deg",transformOrigin:"50% 50%",ease:Linear.easeOut}),o.set([e,t,i],{opacity:"0",ease:Linear.easeInOut}).to([e,t,i],1.5,{opacity:".75",ease:Linear.easeInOut}),a.staggerTo([i,e,t],2,{y:"-=50px",ease:Linear.easeOut},.5)}function Three_ParticleBG(){function e(){var e=document.getElementById("lead");v=$(e)[0].offsetWidth/2,g=$(e)[0].offsetHeight/2,l.aspect=$(e)[0].offsetWidth/$(e)[0].offsetHeight,l.updateProjectionMatrix(),h.setSize($(e)[0].offsetWidth,$(e)[0].offsetHeight)}function t(){var e=document.createElement("canvas");e.width=16,e.height=16;var t=e.getContext("2d"),i=t.createRadialGradient(e.width/2,e.height/2,0,e.width/2,e.height/2,e.width/2);return i.addColorStop(0,"rgba(255,255,255,1)"),i.addColorStop(.2,"rgba(0,255,255,1)"),i.addColorStop(.4,"rgba(0,0,64,1)"),i.addColorStop(1,"rgba(0,0,0,1)"),t.fillStyle=i,t.fillRect(0,0,e.width,e.height),e}function i(e,t){var e=this instanceof THREE.Sprite?this:e,t=void 0!==t?t:0,n=document.getElementById("lead");$(n)[0].offsetWidth,$(n)[0].offsetWidth,$(n)[0].offsetHeight,$(n)[0].offsetHeight;e.position.set(0,0,0),e.scale.x=e.scale.y=32*Math.random()+16,new TWEEN.Tween(e).delay(t).to({},1e4).onComplete(i).start(),new TWEEN.Tween(e.position).delay(t).to({x:5e3*Math.random()-2e3,y:2e3*Math.random()-1e3,z:4e3*Math.random()-2e3},1e4).start(),new TWEEN.Tween(e.scale).delay(t).to({x:.01,y:.01},1e4).start()}function n(e){m=e.clientX-v,u=e.clientY-g}function o(e){1==e.touches.length&&(e.preventDefault(),m=e.touches[0].pageX-v,u=e.touches[0].pageY-g)}function a(e){1==e.touches.length&&(e.preventDefault(),m=e.touches[0].pageX-v,u=e.touches[0].pageY-g)}function s(){requestAnimationFrame(s),d()}function d(){TWEEN.update(),l.position.x+=.05*(m-l.position.x),l.position.y+=.05*(-u-l.position.y),l.lookAt(f.position),h.render(f,l)}var r,c,l,f,h,p,m=0,u=0,v=window.innerWidth/2,g=window.innerHeight/2;!function(){r=document.getElementById("lead-overlay");var s=document.getElementById("lead");s.appendChild(r),console.log($(s)[0].offsetWidth),(l=new THREE.PerspectiveCamera(75,$(s)[0].offsetWidth/$(s)[0].offsetHeight,1,5e3)).position.z=1e3,(f=new THREE.Scene).background=new THREE.Color(0);for(var d=new THREE.SpriteMaterial({map:new THREE.CanvasTexture(t()),blending:THREE.AdditiveBlending}),m=0;m<1e3;m++)i(p=new THREE.Sprite(d),10*m),f.add(p);console.log($(s)[0].offsetHeight),(h=new THREE.WebGLRenderer).setPixelRatio(window.devicePixelRatio),h.setSize($(s)[0].offsetWidth,$(s)[0].offsetHeight),r.appendChild(h.domElement),c=new Stats,document.addEventListener("mousemove",n,!1),document.addEventListener("touchstart",o,!1),document.addEventListener("touchmove",a,!1),window.addEventListener("resize",e,!1)}(),s()}!function(e){e("html").removeClass("no-js"),e("header a").click(function(t){if(!e(this).hasClass("no-scroll")){t.preventDefault();var i=e(this).attr("href"),n=e(i).offset().top;e("html, body").animate({scrollTop:n+"px"},Math.abs(window.pageYOffset-e(i).offset().top)/1),e("header").hasClass("active")&&e("header, body").removeClass("active")}}),e("#to-top").click(function(){e("html, body").animate({scrollTop:0},500)}),e("#lead-down span").click(function(){var t=e("#lead").next().offset().top;e("html, body").animate({scrollTop:t+"px"},500)}),e("#experience-timeline").each(function(){$this=e(this),$userContent=$this.children("div"),$userContent.each(function(){e(this).addClass("vtimeline-content").wrap('<div class="vtimeline-point"><div class="vtimeline-block"></div></div>')}),$this.find(".vtimeline-point").each(function(){e(this).prepend('<div class="vtimeline-icon"><i class="fa fa-map-marker"></i></div>')}),$this.find(".vtimeline-content").each(function(){var t=e(this).data("date");t&&e(this).parent().prepend('<span class="vtimeline-date">'+t+"</span>")})}),e("#mobile-menu-open").click(function(){e("header, body").addClass("active")}),e("#mobile-menu-close").click(function(){e("header, body").removeClass("active")}),e("#view-more-projects").click(function(t){t.preventDefault(),e(this).fadeOut(300,function(){e("#more-projects").fadeIn(300)})}),Three_ParticleBG(),coffeeSteam()}(jQuery);